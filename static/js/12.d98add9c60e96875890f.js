webpackJsonp([12],{"1Lym":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});n("GnUe");var o=n("fAxu"),a={data:function(){return{mobileNumber:"",password:"",captchaObj:"",gtCapValid:""}},mounted:function(){this.accquireToken()},methods:{skip:function(t){this.$router.push({name:t})},accquireToken:function(){var t=this;this.$axios.get("core-api/base/getToken").then(function(e){console.log(e);var n=e.data;if("N00000"==n.retCode){var o=n.body["X-AUTH-TOKEN"];console.log(o),sessionStorage.setItem("XAuthToken",o),t.initGtCaptcha()}else t.$Toast(n.retMsg)}).catch(function(e){console.log(e),t.$Toast("服务器出现问题，请稍后再试")})},initGtCaptcha:function(){var t=this;this.$axios.get("core-api/token/startCaptcha?t="+(new Date).getTime()).then(function(e){console.log(e);var n=e.data;if("N00000"==n.retCode){var o=n.body;window.initGeetest({gt:o.gt,challenge:o.challenge,offline:!o.success,new_captcha:o.new_captcha,product:"popup",width:"100%"},function(e){t.captchaObj=e,e.appendTo("#captcha"),e.onReady(function(){document.getElementById("wait").style.display="none"}),e.onSuccess(function(){t.gtCapValid=e.getValidate()}),e.onError(function(){t.$Toast("出错啦，请稍后进行重试")})})}else t.$Toast(n.retMsg),t.accquireToken()}).catch(function(e){t.$Toast("服务器出现问题，请稍后再试")})},login:function(){var t=this;if(o.a.isvalidPhone(t.mobileNumber))if(o.a.isPwd(t.password))if(""!=t.gtCapValid){var e={mobileNumber:t.mobileNumber,password:t.password,geetestChallenge:t.gtCapValid.geetest_challenge,geetestValidate:t.gtCapValid.geetest_validate,geetestSeccode:t.gtCapValid.geetest_seccode};this.$axios.post("core-api/token/signIn",e).then(function(e){console.log(e);var n=e.data;"N00000"==n.retCode?t.getUserInfo():(t.$Toast(n.retMsg),t.gtCapValid="",t.captchaObj.reset())}).catch(function(e){t.gtCapValid="",t.captchaObj.reset(),console.log(e),t.$Toast("服务器出现问题，请稍后再试")})}else t.$Toast("请拖动滑块验证");else t.$Toast("密码为6-18位字母和数字组合");else t.$Toast("请输入正确的11位手机号码")},getUserInfo:function(){var t=this;this.$axios.get("core-api/userSignIn/loginUserInfo").then(function(e){console.log(e);var n=e.data;"N00000"==n.retCode?n.body&&(t.$store.commit("USER_SIGNIN",n.body),t.$router.push({name:"home"})):t.$Toast(n.retMsg)}).catch(function(e){console.log(e),t.$Toast("服务器出现问题，请稍后再试")})}}},i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"login-webpage"},[t._m(0),t._v(" "),n("div",{attrs:{id:"login-box"}},[n("div",{staticClass:"title"},[t._v("会员登录")]),t._v(" "),n("div",{staticClass:"login"},[n("div",{staticClass:"input-box",class:t.mobileNumber?"input-box-focus":""},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.mobileNumber,expression:"mobileNumber"}],attrs:{type:"text",maxlength:"11",placeholder:"请输入账号"},domProps:{value:t.mobileNumber},on:{input:function(e){e.target.composing||(t.mobileNumber=e.target.value)}}}),t._v(" "),n("span",{staticClass:"line"}),t._v(" "),n("i",{staticClass:"el-icon-user"})]),t._v(" "),n("div",{staticClass:"input-box",class:t.password?"input-box-focus":""},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{type:"password",placeholder:"请输入密码"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),t._v(" "),n("span",{staticClass:"line"}),t._v(" "),n("i",{staticClass:"el-icon-key"})]),t._v(" "),t._m(1)]),t._v(" "),n("div",{staticClass:"button-login",on:{click:function(e){return t.login()}}},[t._v("登录")]),t._v(" "),n("div",{staticClass:"bottom-msg"},[n("span",[t._v("忘记密码?")]),t._v(" "),n("span",{staticClass:"to-register",on:{click:function(e){return t.skip("register")}}},[t._v("免费注册")])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"bck"},[e("img",{attrs:{src:n("LJ2z"),alt:""}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"captcha"}},[e("span",{staticClass:"geetest_wait_text",attrs:{id:"wait"}},[this._v("正在加载验证码....")])])}]};var s=n("VU/8")(a,i,!1,function(t){n("nUVp")},"data-v-4a2f02a3",null);e.default=s.exports},GnUe:function(t,e,n){"use strict";(function(t){var e,o,a=n("pFYg"),i=n.n(a);e="undefined"!=typeof window?window:this,o=function(t,e){if(void 0===t)throw new Error("Geetest requires browser environment");var n=t.document,o=t.Math,a=n.getElementsByTagName("head")[0];function s(t){this._obj=t}function r(t){var e=this;new s(t)._each(function(t,n){e[t]=n})}s.prototype={_each:function(t){var e=this._obj;for(var n in e)e.hasOwnProperty(n)&&t(n,e[n]);return this}},r.prototype={api_server:"api.geetest.com",protocol:"http://",type_path:"/gettype.php",fallback_config:{slide:{static_servers:["static.geetest.com","dn-staticdown.qbox.me"],type:"slide",slide:"/static/js/geetest.0.0.0.js"},fullpage:{static_servers:["static.geetest.com","dn-staticdown.qbox.me"],type:"fullpage",fullpage:"/static/js/fullpage.0.0.0.js"}},_get_fallback_config:function(){return c(this.type)?this.fallback_config[this.type]:this.new_captcha?this.fallback_config.fullpage:this.fallback_config.slide},_extend:function(t){var e=this;new s(t)._each(function(t,n){e[t]=n})}};var c=function(t){return"string"==typeof t},l={},u={},f=function(t,e,n,o){e=function(t){return t.replace(/^https?:\/\/|\/$/g,"")}(e);var a=function(t){return 0!==(t=t.replace(/\/+/g,"/")).indexOf("/")&&(t="/"+t),t}(n)+function(t){if(!t)return"";var e="?";return new s(t)._each(function(t,n){(c(n)||function(t){return"number"==typeof t}(n)||function(t){return"boolean"==typeof t}(n))&&(e=e+encodeURIComponent(t)+"="+encodeURIComponent(n)+"&")}),"?"===e&&(e=""),e.replace(/&$/,"")}(o);return e&&(a=t+e+a),a},d=function(t,e,o,i,s){!function r(c){!function(t,e){var o=n.createElement("script");o.charset="UTF-8",o.async=!0,o.onerror=function(){e(!0)};var i=!1;o.onload=o.onreadystatechange=function(){i||o.readyState&&"loaded"!==o.readyState&&"complete"!==o.readyState||(i=!0,setTimeout(function(){e(!1)},0))},o.src=t,a.appendChild(o)}(f(t,e[c],o,i),function(t){t?c>=e.length-1?s(!0):r(c+1):s(!1)})}(0)},p=function(e,n,a,s){if("object"===(void 0===(r=a.getLib)?"undefined":i()(r))&&null!==r)return a._extend(a.getLib),void s(a);var r;if(a.offline)s(a._get_fallback_config());else{var c="geetest_"+(parseInt(1e4*o.random())+(new Date).valueOf());t[c]=function(e){"success"===e.status?s(e.data):e.status?s(a._get_fallback_config()):s(e),t[c]=void 0;try{delete t[c]}catch(t){}},d(a.protocol,e,n,{gt:a.gt,callback:c},function(t){t&&s(a._get_fallback_config())})}},g=function(t,e){var n={networkError:"网络错误"};if("function"!=typeof e.onError)throw new Error(n[t]);e.onError(n[t])};t.Geetest&&(u.slide="loaded");var h=function(e,n){var o=new r(e);e.https?o.protocol="https://":e.protocol||(o.protocol=t.location.protocol+"//"),p([o.api_server||o.apiserver],o.type_path,o,function(e){var a=e.type,i=function(){o._extend(e),n(new t.Geetest(o))};l[a]=l[a]||[];var s=u[a]||"init";"init"===s?(u[a]="loading",l[a].push(i),d(o.protocol,e.static_servers||e.domains,e[a]||e.path,null,function(t){if(t)u[a]="fail",g("networkError",o);else{u[a]="loaded";for(var e=l[a],n=0,i=e.length;n<i;n+=1){var s=e[n];"function"==typeof s&&s()}l[a]=[]}})):"loaded"===s?i():"fail"===s?g("networkError",o):"loading"===s&&l[a].push(i)})};return t.initGeetest=h,h},"object"===i()(t)&&"object"===i()(t.exports)?t.exports=e.document?o(e):function(t){if(!t.document)throw new Error("Geetest requires a window with a document");return o(t)}:o(e)}).call(e,n("f1Eh")(t))},f1Eh:function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},fAxu:function(t,e,n){"use strict";var o={isUserName:function(t){if(t&&t.length>1){var e=t.match(/^[\u4e00-\u9fa5]+$/);return Boolean(e)}return!1},isvalidPhone:function(t){return/^1\d{10}$/.test(t)},isvalidateIdnumber:function(t){return/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/.test(t)},isvalidateLetterAndNum:function(t){var e=/^[0-9a-zA-Z]+$/;return console.log(e.test(t)),e.test(t)},isPwd:function(t){if(null==t||t.length>18||t.length<6)return!1;var e=/^(?![^a-zA-Z]+$)(?!\D+$)/;return console.log(e.test(t)),e.test(t)},isvalidEmail:function(t){return/^[a-zA-Z0-9_.-]+@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*\.[a-zA-Z0-9]{2,6}$/.test(t)},isSpecialChars:function(t){var e=/[`~!@#$%^&*()_+<>?:"{},.\/;'[\]]/im;return console.log(e.test(t)),!e.test(t)&&!/[·！#￥（——）：；“”‘、，|《。》？、【】[\]]/im.test(t)}};e.a=o},nUVp:function(t,e){}});
//# sourceMappingURL=12.d98add9c60e96875890f.js.map